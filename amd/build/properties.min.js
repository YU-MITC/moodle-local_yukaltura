define ("local_yukaltura/properties",["jquery"],function(a){return{init:function init(b,c,d,e,f){var p=0,q=0,r=!1;function g(b){if(!1!==r){clearTimeout(r)}r=setTimeout(function(){a(b).css({width:"550px",height:"400px"});a(b).css({"font-size":"14px"});var c=a(window).width(),d=a(window).height(),e=a(b).outerWidth(),f=a(b).outerHeight();a(b).css({left:(c-e)/2+"px",top:(d-f)/2+"px"})},200)}function h(a){var b=/["$%&'~^\\`/]/;if(!0===b.test(a)){return!1}return!0}function i(a,b){if(200>a||200>b){return!1}else if(1280<a||1280<b){return!1}return!0}function j(b){a(this).blur();if(a("#modal_window")[0]){return!1}var c=document.documentElement,d=document.body;p=c.scrollLeft||d.scrollLeft;q=c.scrollTop||d.scrollTop;a("body").append("<div id=\"media_properties_panel\"></div>");a("body").append("<div id=\"modal_window\"></div>");a("#modal_window").fadeIn("slow");g("#media_properties_panel");a("#media_properties_panel").fadeIn("slow");a("#media_properties_panel").html("<iframe src=\""+b+"\" width=\"100%\" height=\"100%\">");g("#media_properties_panel");a(parent.window).resize(function(){g("#media_properties_panel")});return!0}function k(){window.scrollTo(p,q);a("#modal_window",parent.document).fadeOut("slow");a("#modal_window",parent.document).remove();a("#media_properties_panel",parent.document).fadeOut("slow");a("#media_properties_panel",parent.document).remove()}function l(){var b=!1,c=a("#media_prop_width").val(),d=a("#media_prop_height").val(),e=/^\d{2,4}$/;if(!0===e.test(c)&&!0===e.test(d)){var f=parseInt(c),g=parseInt(d);b=i(f,g)}if(!0===b){a("#submit_btn").prop("disabled",!1);a("#submit_btn").css({opacity:"1.0"})}else{a("#submit_btn").prop("disabled",!0);a("#submit_btn").css({opacity:"0.5"})}}function m(){var b=a("#media_prop_size").prop("selectedIndex");if(b==a("#media_prop_size").children("option").length-1){a("#media_prop_width").prop("disabled",!1);a("#media_prop_height").prop("disabled",!1);a("#submit_btn").prop("disabled",!0);a("#submit_btn").css({opacity:"0.5"})}else{a("#media_prop_width").val("");a("#media_prop_height").val("");a("#media_prop_width").prop("disabled",!0);a("#media_prop_height").prop("disabled",!0);a("#submit_btn").prop("disabled",!1);a("#submit_btn").css({opacity:"1.0"})}}function n(){var b=a("#media_prop_name").val();b=b.trim();if(!1===h(b)){window.alert(c);return!1}var g=a("#media_prop_size").prop("selectedIndex"),j="",l="";if(g==a("#media_prop_size").children("option").length-1){if(""===a("#media_prop_width").value||""===a("#media_prop_height").value){window.alert(d);return!1}else{j=a("#media_prop_width").val();l=a("#media_prop_height").val();j=j.trim();l=l.trim();var m=/^\d{2,4}$/;if(!1===m.test(j)||!1===m.test(l)){window.alert(e);return!1}}}else{var n=a("#media_prop_size option:selected").text(),o=n.match(/\d{2,4}/g);if(null===o||2!=o.length){window.alert(f);return!1}j=o[0];l=o[1]}if(!1===i(parseInt(j),parseInt(l))){window.alert(f);return!1}a("#width",parent.document).val(j);a("#height",parent.document).val(l);a("media_title",parent.document).val(b);a("#uiconf_id",parent.document).val(a("#media_prop_player").val());k();return!0}function o(){a("#media_prop_name").val(a("#media_title",parent.document).val());for(var b=a("#uiconf_id",parent.document).val(),c=!1,d=0;d<a("#media_prop_player").children("option").length;d++){if(a("#media_prop_player option:eq("+d+")").val()==b){a("#media_prop_player").prop("selectedIndex",d);c=!0}}if(!1===c){a("#media_prop_player").prop("selectedIndex",0)}var e=a("#width",parent.document).val(),f=a("#height",parent.document).val();a("#media_prop_width").prop("disabled",!1);a("#media_prop_height").prop("disabled",!1);if(""!==e&&"0"!=e&&""!==f&&"0"!=f){for(var g=0;g<a("#media_prop_size").children("option").length;g++){if(-1!=a("#media_prop_size option:eq("+g+")").text().indexOf(e+"x"+f)){a("#media_prop_size").prop("selectedIndex",g);a("#media_prop_width").prop("disabled",!0);a("#media_prop_height").prop("disabled",!0)}}if(!1===a("#media_prop_width").prop("disabled")){var h=a("#media_prop_size").children("option").length-1;a("#media_prop_size").prop("selectedIndex",h);a("#media_prop_width").val(e);a("#media_prop_height").val(f)}}else{a("#media_prop_width").val("");a("#media_prop_height").val("");a("#media_prop_size").prop("selectedIndex",0)}}a("#id_media_properties").on("click",function(){j(b)});a("#media_prop_size").on("change",function(){m()});a("#media_prop_width").on("change",function(){l()});a("#media_prop_height").on("change",function(){l()});a("#submit_btn").on("click",function(){n()});a("#cancel_btn").on("click",function(){k()});if(-1!=a(location).attr("pathname").indexOf("media_properties.php")){o()}}}});
//# sourceMappingURL=properties.min.js.map
