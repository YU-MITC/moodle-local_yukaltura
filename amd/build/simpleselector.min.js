define(["jquery"],function(a){return{init:function(b,c){function d(){var b=a("#selectorSort").val();location.href=b}function e(b){var c=b.target.id,d=b.target.alt,e=b.target.src;e=e.replace(/width\/\d+/g,"width/150"),e=e.replace(/height\/\d+/g,"height/100"),a("#select_id").val(c),a("#select_name").html(d),a("#select_thumbnail").val(e),a("#submit_btn").prop("disabled",!1),a("#submit_btn").css({opacity:"1.0"})}function f(b){m!==!1&&clearTimeout(m),m=setTimeout(function(){var c=a(window).width(),d=a(window).height(),e=a(b).outerWidth(),f=a(b).outerHeight();a(b).css({left:(c-e)/2+"px",top:(d-f)/2+"px"})},200)}function g(b){if(a(this).blur(),a("#modal_window")[0])return!1;var c=document.documentElement,d=document.body;return k=c.scrollLeft||d.scrollLeft,l=c.scrollTop||d.scrollTop,a("body").append('<div id="selector_content"></div>'),a("body").append('<div id="modal_window"></div>'),a("#modal_window").fadeIn("slow"),f("#selector_content"),a("#selector_content").fadeIn("slow"),a("#selector_content").html('<iframe src="'+b+'" width="100%" height="100%">'),f("#selector_content"),a(parent.window).resize(function(){f("#selector_content")}),!0}function h(){window.scrollTo(k,l),a("#modal_window",parent.document).fadeOut("slow"),a("#modal_window",parent.document).remove(),a("#selector_content",parent.document).fadeOut("slow"),a("#selector_content",parent.document).remove()}function i(){var b=a("#select_id").val(),c=a("#select_name").html(),d=a("#select_thumbnail").val();if(null!==b&&""!==b){null!==a("#entry_id")&&a("#entry_id",parent.document).val(a("#select_id").val());var e=a("#id_name",parent.document);null!==e&&e.val(a("#select_name").html());var f="",g=a("#description_"+b);null!==g&&(f=g.html(),f=f.replace(/\n/g,"<br />")),f="<p>"+f+"<br /></p>";var i=a("#id_introeditoreditable",parent.document);null!==i&&i.html(f),null!==a("#media_thumbnail",parent.document)&&(a("#media_thumbnail",parent.document).prop("src",d),a("#media_thumbnail",parent.document).prop("alt",c),a("#media_thumbnail",parent.document).prop("title",c));var j=a("#id_media_properties",parent.document);null!==j&&j.css({visibility:"visible"});var k=a("#submit_media",parent.document);null!==k&&k.prop("disabled",!1),h()}}function j(b){a("#id_add_media",parent.document).val(b)}var k=0,l=0,m=!1;a("#id_add_media").on("click",function(){g(b)}),a("#selectorSort").on("change",function(){d()}),a("#submit_btn").on("click",function(){i()}),a("#cancel_btn").on("click",function(){h()}),a("#fadeout").on("click",function(){h()}),-1!=a(location).attr("pathname").indexOf("simple_selector.php")?a(".media_thumbnail").on("click",function(a){e(a)}):a("#media_thumbnail").on("change",function(){j(c)})}}});