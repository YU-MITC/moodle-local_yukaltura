/**
 * Simple Secctor script for kaltura media embed.
 *
 * @copyright (C) 2016-2023 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_yukaltura/simpleselector",["jquery"],(function($){return{init:function(selectorUrl,replaceLabel){var modalX=0,modalY=0,timer=!1;function centeringModalSyncer(contentPanel){!1!==timer&&clearTimeout(timer),timer=setTimeout((function(){var w=$(window).width(),h=$(window).height(),cw=$(contentPanel).outerWidth(),ch=$(contentPanel).outerHeight();$(contentPanel).css({left:(w-cw)/2+"px",top:(h-ch)/2+"px"})}),200)}function fadeOutSelectorWindow(){window.scrollTo(modalX,modalY),$("#modal_window",parent.document).fadeOut("slow"),$("#modal_window",parent.document).remove(),$("#selector_content",parent.document).fadeOut("slow"),$("#selector_content",parent.document).remove()}$("#selectorSort").on("change",(function(){var url;url=$("#selectorSort").val(),location.href=url})),$("#id_add_media").on("click",(function(){!function(url){if($(this).blur(),$("#modal_window")[0])return!1;var dElm=document.documentElement,dBody=document.body;modalX=dElm.scrollLeft||dBody.scrollLeft,modalY=dElm.scrollTop||dBody.scrollTop,$("body").append('<div id="selector_content"></div>'),$("body").append('<div id="modal_window"></div>'),$("#modal_window").fadeIn("slow"),centeringModalSyncer("#selector_content"),$("#selector_content").fadeIn("slow"),$("#selector_content").html('<iframe src="'+url+'" width="100%" height="100%">'),centeringModalSyncer("#selector_content"),$(parent.window).resize((function(){centeringModalSyncer("#selector_content")}))}(selectorUrl)})),$("#submit_btn").on("click",(function(){!function(){var selectId=$("#select_id").val(),selectName=$("#select_name").html(),selectThumbnail=$("#select_thumbnail").val();if(null!==selectId&&""!==selectId){null!==$("#entry_id")&&$("#entry_id",parent.document).val($("#select_id").val());var idName=$("#id_name",parent.document);null!==idName&&idName.val($("#select_name").html());var desc="",selectDesc=$("#description_"+selectId);null!==selectDesc&&(desc=(desc=selectDesc.html()).replace(/\n/g,"<br />")),desc="<p>"+desc+"<br /></p>";var editor=$("#id_introeditoreditable",parent.document);null!==editor&&(null!==desc&&""!==desc?editor.html(desc):editor.html("")),null!==(editor=$("#id_introeditor",parent.document))&&(null!==desc&&""!==desc?editor.html(desc):editor.html("")),null!==$("#media_thumbnail",parent.document)&&($("#media_thumbnail",parent.document).prop("src",selectThumbnail),$("#media_thumbnail",parent.document).prop("alt",selectName),$("#media_thumbnail",parent.document).prop("title",selectName));var idMediaProperties=$("#id_media_properties",parent.document);null!==idMediaProperties&&idMediaProperties.css({visibility:"visible"});var submitMedia=$("#submit_media",parent.document);null!==submitMedia&&submitMedia.prop("disabled",!1),fadeOutSelectorWindow()}}()})),$("#cancel_btn").on("click",(function(){fadeOutSelectorWindow()})),$("#fadeout").on("click",(function(){fadeOutSelectorWindow()})),-1!=$(location).attr("pathname").indexOf("simple_selector.php")?$(".media_thumbnail").on("click",(function(e){!function(e){var selectId=e.target.id,selectName=e.target.alt,selectThumbnail=e.target.src;selectThumbnail=(selectThumbnail=selectThumbnail.replace(/width\/\d+/g,"width/150")).replace(/height\/\d+/g,"height/100"),$("#select_id").val(selectId),$("#select_name").html(selectName),$("#select_thumbnail").val(selectThumbnail),$("#submit_btn").prop("disabled",!1),$("#submit_btn").css({opacity:"1.0"})}(e)})):$("#media_thumbnail").on("change",(function(){var str;str=replaceLabel,$("#id_add_media",parent.document).val(str)}))}}}));

//# sourceMappingURL=simpleselector.min.js.map